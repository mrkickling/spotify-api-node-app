<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/style.css">
    <title></title>
  </head>
  <body ng-app="spotifyApiApp" ng-controller="SearchController" ng-cloak>
    <section class="queue">
      <div class="contain-queue">
        <h1>{{{name}}}</h1>

        <div class="now-playing" ng-show="nowPlaying.name.length>0">
          <img ng-src="[[[ nowPlaying.album.images[1].url ]]]" alt="">
          <div class="now-playing-info">
            <h3>Now playing</h3>
            [[[nowPlaying.name]]] -  [[[nowPlaying.artists[0].name]]]
          </div>
        </div>

        <div class="search-form">
          <br>
          <form class="" ng-submit="search()">
            Add a song to queue:
            <input class="pretty-input" ng-focus="focus=true" type="text" id="search-input" name="search-input" placeholder="Song name" ng-model="search_input">
          </form>
          <div id="search-results" ng-show="focus && search_results.length>0">
            <div class="song" ng-repeat="song in search_results">
              <img ng-src="[[[ song.album.images[2].url ]]]" alt="">
              <div class="song-info">
                [[[song.name]]] - [[[song.artists[0].name]]]
                <button ng-click="addSong(song)" type="button" name="button">Add song</button>
              </div>
            </div>
            <button type="button" name="button" ng-click="focus=false">Close dropdown</button>
          </div>
        </div>

        <h2>Queue</h2>
        <div id="song-queue">
          <div class="song" ng-repeat="song in song_queue track by $index">
            <img ng-src="[[[ song.album.images[2].url ]]]" alt="">
            <div class="song-info">
              [[[song.name]]] - [[[song.artists[0].name]]]
              <button ng-show="user_id == song.added_by" ng-click="deleteSong(song)" type="button" name="button">Delete</button>
            </div>
          </div>
        </div>

      </div>
    </section>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular-cookies.min.js"></script>
  <script src="/js/search.js"></script>
  <script src="/js/sockets.js"></script>
</html>
